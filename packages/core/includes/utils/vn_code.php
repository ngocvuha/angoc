<?php
/******************************
COPY RIGHT BY NYN PORTAL - TCV
WRITTEN BY vuonggialong
******************************/

	global $utf82telex, $utf82latin;
	$utf82telex=array(
		'à'=>'af',
		'á'=>'as',
		'ả'=>'ar',
		'ã'=>'ax',
		'ạ'=>'aj',
		
		'ă'=>'aw',
		'ằ'=>'awf',
		'ắ'=>'aws',
		'ẳ'=>'awr',
		'ẵ'=>'awx',
		'ặ'=>'awj',
		'â'=>'aa',
		'ầ'=>'aaf',
		'ấ'=>'aas',
		'ẩ'=>'aar',
		'ẫ'=>'aax',
		'ậ'=>'aaj',

		'đ'=>'dd',

		'è'=>'ef',
		'é'=>'es',
		'ẻ'=>'er',
		'ẽ'=>'ex',
		'ẹ'=>'ej',

		'ê'=>'ee',
		'ề'=>'eef',
		'ế'=>'ees',
		'ể'=>'eer',
		'ễ'=>'eex',
		'ệ'=>'eej',

		'ì'=>'if',
		'í'=>'is',
		'ỉ'=>'ir',
		'ĩ'=>'ix',
		'ị'=>'ij',

		'ò'=>'of',
		'ó'=>'os',
		'ỏ'=>'or',
		'õ'=>'ox',
		'ọ'=>'oj',

		'ô'=>'oo',		
		'ồ'=>'oof',
		'ố'=>'oos',
		'ổ'=>'oor',
		'ỗ'=>'oox',
		'ộ'=>'ooj',

		'ơ'=>'ow',		
		'ờ'=>'owf',
		'ớ'=>'ows',
		'ở'=>'owr',
		'ỡ'=>'owx',
		'ợ'=>'owj',

		'ù'=>'uf',
		'ú'=>'us',
		'ủ'=>'ur',
		'ũ'=>'ux',
		'ụ'=>'uj',

		'ư'=>'uw',		
		'ừ'=>'uwf',
		'ứ'=>'uws',
		'ử'=>'uwr',
		'ữ'=>'uwx',
		'ự'=>'uwj',

		'À'=>'af',
		'Á'=>'as',
		'Ả'=>'ar',
		'Ã'=>'ax',
		'Ạ'=>'aj',
		
		'Ă'=>'aw',
		'Ằ'=>'awf',
		'Ắ'=>'aws',
		'Ẳ'=>'awr',
		'Ẵ'=>'awx',
		'Ặ'=>'awj',

		'Â'=>'aa',		
		'Ầ'=>'aaf',
		'Ấ'=>'aas',
		'Ẩ'=>'aar',
		'Ẫ'=>'aax',
		'Ậ'=>'aaj',

		'Đ'=>'dd',

		'È'=>'ef',
		'É'=>'es',
		'Ẻ'=>'er',
		'Ẽ'=>'ex',
		'Ẹ'=>'ej',

		'Ê'=>'ee',		
		'Ề'=>'eef',
		'Ế'=>'ees',
		'Ể'=>'eer',
		'Ễ'=>'eex',
		'Ệ'=>'eej',

		'Ì'=>'if',
		'Í'=>'is',
		'Ỉ'=>'ir',
		'Ĩ'=>'ix',
		'Ị'=>'ij',

		'Ò'=>'of',
		'Ó'=>'os',
		'Ỏ'=>'or',
		'Õ'=>'ox',
		'Ọ'=>'oj',

		'Ô'=>'oo',		
		'Ồ'=>'oof',
		'Ố'=>'oos',
		'Ổ'=>'oor',
		'Ỗ'=>'oox',
		'Ộ'=>'ooj',

		'Ơ'=>'ow',		
		'Ờ'=>'owf',
		'Ớ'=>'ows',
		'Ở'=>'owr',
		'Ỡ'=>'owx',
		'Ợ'=>'owj',

		'Ù'=>'uf',
		'Ú'=>'us',
		'Ủ'=>'ur',
		'Ũ'=>'ux',
		'Ụ'=>'uj',

		'Ư'=>'uw',		
		'Ừ'=>'uwf',
		'Ứ'=>'uws',
		'Ử'=>'uwr',
		'Ữ'=>'uwx',
		'Ự'=>'uwj',

		'ỳ'=>'yf',
		'ý'=>'ys',
		'ỷ'=>'yr',
		'ỹ'=>'yx',
		'ỵ'=>'yj',
		
		'À'=>'af',
		'Á'=>'as',
		'Ả'=>'ar',
		'Ã'=>'ax',
		'Ạ'=>'aj',
		
		'Ă'=>'aw',
		'Ằ'=>'awf',
		'Ắ'=>'aws',
		'Ẳ'=>'awr',
		'Ẵ'=>'awx',
		'Ặ'=>'awj',

		'Â'=>'aa',		
		'Ầ'=>'aaf',
		'Ấ'=>'aas',
		'Ẩ'=>'aar',
		'Ẫ'=>'aax',
		'Ậ'=>'aaj',

		'Đ'=>'dd',

		'È'=>'ef',
		'É'=>'es',
		'Ẻ'=>'er',
		'Ẽ'=>'ex',
		'Ẹ'=>'ej',

		'Ê'=>'ee',		
		'Ề'=>'eef',
		'Ế'=>'ees',
		'Ể'=>'eer',
		'Ễ'=>'eex',
		'Ệ'=>'eej',

		'Ì'=>'if',
		'Í'=>'is',
		'Ỉ'=>'ir',
		'Ĩ'=>'ix',
		'Ị'=>'ij',

		'Ò'=>'of',
		'Ó'=>'os',
		'Ỏ'=>'or',
		'Õ'=>'ox',
		'Ọ'=>'oj',

		'Ô'=>'oo',		
		'Ồ'=>'oof',
		'Ố'=>'oos',
		'Ổ'=>'oor',
		'Ỗ'=>'oox',
		'Ộ'=>'ooj',

		'Ơ'=>'ow',		
		'Ờ'=>'owf',
		'Ớ'=>'ows',
		'Ở'=>'owr',
		'Ỡ'=>'owx',
		'Ợ'=>'owj',

		'Ù'=>'uf',
		'Ú'=>'us',
		'Ủ'=>'ur',
		'Ũ'=>'ux',
		'Ụ'=>'uj',

		'Ư'=>'uw',		
		'Ừ'=>'uwf',
		'Ứ'=>'uws',
		'Ử'=>'uwr',
		'Ữ'=>'uwx',
		'Ự'=>'uwj',
		
		'Ỳ'=>'yf',
		'Ý'=>'ys',
		'Ỷ'=>'yr',
		'Ỹ'=>'yx',
		'Ỵ'=>'yj'

	);
	foreach($utf82telex as $char=>$new_char)
	{
		$utf82latin[$char] = $new_char{0};
	}
function convert_utf8_to_telex($str)
{
	global $utf82telex;
	return strtr(fix_font($str),$utf82telex);
}
function convert_utf8_to_latin($str)
{
	global $utf82latin;
	return strtr($str,$utf82latin);
}
function html_to_utf8 ($data)
{
    return preg_replace("/\\&\\#([0-9]{3,10})\\;/e", '_html_to_utf8("\\1")', $data);
}
function _html_to_utf8 ($data)
{
    if ($data > 127)
        {
        $i = 5;
        while (($i--) > 0)
            {
            if ($data != ($a = $data % ($p = pow(64, $i))))
                {
                $ret = chr(base_convert(str_pad(str_repeat(1, $i + 1), 8, "0"), 2, 10) + (($data - $a) / $p));
                for ($i; $i > 0; $i--)
                    $ret .= chr(128 + ((($data % pow(64, $i)) - ($data % ($p = pow(64, $i - 1)))) / $p));
                break;
                }
            }
        }
        else
        $ret = "&#$data;";
    return $ret;
}
function encodeToUtf8($string) {
     return mb_convert_encoding($string, "UTF-8", mb_detect_encoding($string, "UTF-8, ISO-8859-1, ISO-8859-15", true));
}

function encodeToIso($string) {
     return mb_convert_encoding($string, "ISO-8859-1", mb_detect_encoding($string, "UTF-8, ISO-8859-1, ISO-8859-15", true));
}
function convert_utf8_to_url_rewrite($data)
{
	$str = convert_utf8_to_latin(trim($data));
	$str = preg_replace('/[^0-9a-zA-Z-\_.]+/','-',$str);
	$str = str_replace(array('---','--'),array('-','-'),$str);
	if(substr($str,strlen($str)-1,1)=='-')
	{
		$str = substr($str,0,strlen($str)-1);
	}
	return strtolower($str);
}
function fix_font($source)
{
	$arr_search = array(
		'&agrave;'
		,'&acirc;'
		,'Ä‘'
		,'á»™'
		,'&ecirc;'
		,'&iacute;'
		,'áº¥'
		,'&ocirc;'
		,'&egrave;'
		,'&aacute;'
		,'&atilde;'
		,'&uacute;'
		,'&ograve;'
		,'&igrave;'
		,'&oacute;'
		,'&otilde;'
		,'&yacute;'
		,'&ugrave;'
		,'&eacute;'
		,'&Aacute;'
		,'&Egrave;'
		,'&Aacute;'
		,'&Atilde;'
		,'&Uacute;'
		,'&Ograve;'
		,'&Igrave;'
		,'&Oacute;'
		,'&Otilde;'
		,'&Yacute;'
		,'&Ugrave;'
		,'&Eacute;'
		,'&Agrave;'
		,'&Atilde;'
		
	);
	$arr_replace = array(
		'à'
		,'â'
		,'đ'
		,'ộ'
		,'ê'
		,'í'
		,'ấ'
		,'ô'
		,'è'
		,'á'
		,'ã'
		,'ú'
		,'ò'
		,'ì'
		,'ó'
		,'õ'
		,'ý'
		,'ù'
		,'é'
		,'Á'
		,'È'
		,'Á'
		,'Ã'
		,'Ú'
		,'É'
		,'À'
		,'Ã'
	);
	return str_replace($arr_search,$arr_replace,$source);
}
function UniToDecimal($str) {
	$convmap = array(
        0xe1,0xe1,0x0,0xe1,0xc1,0xc1,0x0,0xc1,0xe0,0xe0,0x0,0xe0,0xc0,0xc0,0x0,0xc0,0x1ea3,0x1ea3,0x0,0x1ea3,0x1ea2,0x1ea2,0x0,0x1ea2,0xe3,0xe3,0x0,0xe3,0xc3,0xc3,0x0,0xc3,0x1ea1,0x1ea1,0x0,0x1ea1,0x1ea0,0x1ea0,0x0,0x1ea0,
        0x103,0x103,0x0,0x103,0x102,0x102,0x0,0x102,0x1eaf,0x1eaf,0x0,0x1eaf,0x1eae,0x1eae,0x0,0x1eae,0x1eb1,0x1eb1,0x0,0x1eb1,0x1eb0,0x1eb0,0x0,0x1eb0,0x1eb3,0x1eb3,0x0,0x1eb3,0x1eb2,0x1eb2,0x0,0x1eb2,0x1eb5,0x1eb5,0x0,0x1eb5,
        0x1eb4,0x1eb4,0x0,0x1eb4,0x1eb7,0x1eb7,0x0,0x1eb7,0x1eb6,0x1eb6,0x0,0x1eb6,0xe2,0xe2,0x0,0xe2,0xc2,0xc2,0x0,0xc2,0x1ea5,0x1ea5,0x0,0x1ea5,0x1ea4,0x1ea4,0x0,0x1ea4,0x1ea7,0x1ea7,0x0,0x1ea7,0x1ea6,0x1ea6,0x0,0x1ea6,0x1ea9,
        0x1ea9,0x0,0x1ea9,0x1ea8,0x1ea8,0x0,0x1ea8,0x1eab,0x1eab,0x0,0x1eab,0x1eaa,0x1eaa,0x0,0x1eaa,0x1ead,0x1ead,0x0,0x1ead,0x1eac,0x1eac,0x0,0x1eac,0xe9,0xe9,0x0,0xe9,0xc9,0xc9,0x0,0xc9,0xe8,0xe8,0x0,0xe8,0xc8,0xc8,0x0,0xc8,
        0x1ebb,0x1ebb,0x0,0x1ebb,0x1eba,0x1eba,0x0,0x1eba,0x1ebd,0x1ebd,0x0,0x1ebd,0x1ebc,0x1ebc,0x0,0x1ebc,0x1eb9,0x1eb9,0x0,0x1eb9,0x1eb8,0x1eb8,0x0,0x1eb8,0xea,0xea,0x0,0xea,0xca,0xca,0x0,0xca,0x1ebf,0x1ebf,0x0,0x1ebf,0x1ebe,
        0x1ebe,0x0,0x1ebe,0x1ec1,0x1ec1,0x0,0x1ec1,0x1ec0,0x1ec0,0x0,0x1ec0,0x1ec3,0x1ec3,0x0,0x1ec3,0x1ec2,0x1ec2,0x0,0x1ec2,0x1ec5,0x1ec5,0x0,0x1ec5,0x1ec4,0x1ec4,0x0,0x1ec4,0x1ec7,0x1ec7,0x0,0x1ec7,0x1ec6,0x1ec6,0x0,0x1ec6,
        0xed,0xed,0x0,0xed,0xcd,0xcd,0x0,0xcd,0xec,0xec,0x0,0xec,0xcc,0xcc,0x0,0xcc,0x1ec9,0x1ec9,0x0,0x1ec9,0x1ec8,0x1ec8,0x0,0x1ec8,0x1ecb,0x1ecb,0x0,0x1ecb,0x1eca,0x1eca,0x0,0x1eca,0xf3,0xf3,0x0,0xf3,0xd3,0xd3,0x0,0xd3,0xf2,
        0xf2,0x0,0xf2,0xd2,0xd2,0x0,0xd2,0x1ecf,0x1ecf,0x0,0x1ecf,0x1ece,0x1ece,0x0,0x1ece,0xf5,0xf5,0x0,0xf5,0xd5,0xd5,0x0,0xd5,0x1ecd,0x1ecd,0x0,0x1ecd,0x1ecc,0x1ecc,0x0,0x1ecc,0x1a1,0x1a1,0x0,0x1a1,0x1a0,0x1a0,0x0,0x1a0,0x1edb,
        0x1edb,0x0,0x1edb,0x1eda,0x1eda,0x0,0x1eda,0x1edd,0x1edd,0x0,0x1edd,0x1edc,0x1edc,0x0,0x1edc,0x1edf,0x1edf,0x0,0x1edf,0x1ede,0x1ede,0x0,0x1ede,0x1ee1,0x1ee1,0x0,0x1ee1,0x1ee0,0x1ee0,0x0,0x1ee0,0x1ee3,0x1ee3,0x0,0x1ee3,
        0x1ee2,0x1ee2,0x0,0x1ee2,0xf4,0xf4,0x0,0xf4,0xd4,0xd4,0x0,0xd4,0x1ed1,0x1ed1,0x0,0x1ed1,0x1ed0,0x1ed0,0x0,0x1ed0,0x1ed3,0x1ed3,0x0,0x1ed3,0x1ed2,0x1ed2,0x0,0x1ed2,0x1ed5,0x1ed5,0x0,0x1ed5,0x1ed4,0x1ed4,0x0,0x1ed4,0x1ed7,
        0x1ed7,0x0,0x1ed7,0x1ed6,0x1ed6,0x0,0x1ed6,0x1ed9,0x1ed9,0x0,0x1ed9,0x1ed8,0x1ed8,0x0,0x1ed8,0xfa,0xfa,0x0,0xfa,0xda,0xda,0x0,0xda,0xf9,0xf9,0x0,0xf9,0xd9,0xd9,0x0,0xd9,0x1ee7,0x1ee7,0x0,0x1ee7,0x1ee6,0x1ee6,0x0,0x1ee6,
        0x169,0x169,0x0,0x169,0x168,0x168,0x0,0x168,0x1ee5,0x1ee5,0x0,0x1ee5,0x1ee4,0x1ee4,0x0,0x1ee4,0x1b0,0x1b0,0x0,0x1b0,0x1af,0x1af,0x0,0x1af,0x1ee9,0x1ee9,0x0,0x1ee9,0x1ee8,0x1ee8,0x0,0x1ee8,0x1eeb,0x1eeb,0x0,0x1eeb,0x1eea,
        0x1eea,0x0,0x1eea,0x1eed,0x1eed,0x0,0x1eed,0x1eec,0x1eec,0x0,0x1eec,0x1eef,0x1eef,0x0,0x1eef,0x1eee,0x1eee,0x0,0x1eee,0x1ef1,0x1ef1,0x0,0x1ef1,0x1ef0,0x1ef0,0x0,0x1ef0,0xfd,0xfd,0x0,0xfd,0xdd,0xdd,0x0,0xdd,0x1ef3,0x1ef3,
        0x0,0x1ef3,0x1ef2,0x1ef2,0x0,0x1ef2,0x1ef7,0x1ef7,0x0,0x1ef7,0x1ef6,0x1ef6,0x0,0x1ef6,0x1ef9,0x1ef9,0x0,0x1ef9,0x1ef8,0x1ef8,0x0,0x1ef8,0x1ef5,0x1ef5,0x0,0x1ef5,0x1ef4,0x1ef4,0x0,0x1ef4,0x111,0x111,0x0,0x111,0x110,0x110,0x0,0x110,
        0x128,0x128,0x0,0x128,0x129,0x129,0x0,0x129,
	);
	return mb_encode_numericentity($str, $convmap, "UTF-8");
}
function DecimalToUni($str) {
	$convmap = array(
        0xe1,0xe1,0x0,0xe1,0xc1,0xc1,0x0,0xc1,0xe0,0xe0,0x0,0xe0,0xc0,0xc0,0x0,0xc0,0x1ea3,0x1ea3,0x0,0x1ea3,0x1ea2,0x1ea2,0x0,0x1ea2,0xe3,0xe3,0x0,0xe3,0xc3,0xc3,0x0,0xc3,0x1ea1,0x1ea1,0x0,0x1ea1,0x1ea0,0x1ea0,0x0,0x1ea0,
        0x103,0x103,0x0,0x103,0x102,0x102,0x0,0x102,0x1eaf,0x1eaf,0x0,0x1eaf,0x1eae,0x1eae,0x0,0x1eae,0x1eb1,0x1eb1,0x0,0x1eb1,0x1eb0,0x1eb0,0x0,0x1eb0,0x1eb3,0x1eb3,0x0,0x1eb3,0x1eb2,0x1eb2,0x0,0x1eb2,0x1eb5,0x1eb5,0x0,0x1eb5,
        0x1eb4,0x1eb4,0x0,0x1eb4,0x1eb7,0x1eb7,0x0,0x1eb7,0x1eb6,0x1eb6,0x0,0x1eb6,0xe2,0xe2,0x0,0xe2,0xc2,0xc2,0x0,0xc2,0x1ea5,0x1ea5,0x0,0x1ea5,0x1ea4,0x1ea4,0x0,0x1ea4,0x1ea7,0x1ea7,0x0,0x1ea7,0x1ea6,0x1ea6,0x0,0x1ea6,0x1ea9,
        0x1ea9,0x0,0x1ea9,0x1ea8,0x1ea8,0x0,0x1ea8,0x1eab,0x1eab,0x0,0x1eab,0x1eaa,0x1eaa,0x0,0x1eaa,0x1ead,0x1ead,0x0,0x1ead,0x1eac,0x1eac,0x0,0x1eac,0xe9,0xe9,0x0,0xe9,0xc9,0xc9,0x0,0xc9,0xe8,0xe8,0x0,0xe8,0xc8,0xc8,0x0,0xc8,
        0x1ebb,0x1ebb,0x0,0x1ebb,0x1eba,0x1eba,0x0,0x1eba,0x1ebd,0x1ebd,0x0,0x1ebd,0x1ebc,0x1ebc,0x0,0x1ebc,0x1eb9,0x1eb9,0x0,0x1eb9,0x1eb8,0x1eb8,0x0,0x1eb8,0xea,0xea,0x0,0xea,0xca,0xca,0x0,0xca,0x1ebf,0x1ebf,0x0,0x1ebf,0x1ebe,
        0x1ebe,0x0,0x1ebe,0x1ec1,0x1ec1,0x0,0x1ec1,0x1ec0,0x1ec0,0x0,0x1ec0,0x1ec3,0x1ec3,0x0,0x1ec3,0x1ec2,0x1ec2,0x0,0x1ec2,0x1ec5,0x1ec5,0x0,0x1ec5,0x1ec4,0x1ec4,0x0,0x1ec4,0x1ec7,0x1ec7,0x0,0x1ec7,0x1ec6,0x1ec6,0x0,0x1ec6,
        0xed,0xed,0x0,0xed,0xcd,0xcd,0x0,0xcd,0xec,0xec,0x0,0xec,0xcc,0xcc,0x0,0xcc,0x1ec9,0x1ec9,0x0,0x1ec9,0x1ec8,0x1ec8,0x0,0x1ec8,0x1ecb,0x1ecb,0x0,0x1ecb,0x1eca,0x1eca,0x0,0x1eca,0xf3,0xf3,0x0,0xf3,0xd3,0xd3,0x0,0xd3,0xf2,
        0xf2,0x0,0xf2,0xd2,0xd2,0x0,0xd2,0x1ecf,0x1ecf,0x0,0x1ecf,0x1ece,0x1ece,0x0,0x1ece,0xf5,0xf5,0x0,0xf5,0xd5,0xd5,0x0,0xd5,0x1ecd,0x1ecd,0x0,0x1ecd,0x1ecc,0x1ecc,0x0,0x1ecc,0x1a1,0x1a1,0x0,0x1a1,0x1a0,0x1a0,0x0,0x1a0,0x1edb,
        0x1edb,0x0,0x1edb,0x1eda,0x1eda,0x0,0x1eda,0x1edd,0x1edd,0x0,0x1edd,0x1edc,0x1edc,0x0,0x1edc,0x1edf,0x1edf,0x0,0x1edf,0x1ede,0x1ede,0x0,0x1ede,0x1ee1,0x1ee1,0x0,0x1ee1,0x1ee0,0x1ee0,0x0,0x1ee0,0x1ee3,0x1ee3,0x0,0x1ee3,
        0x1ee2,0x1ee2,0x0,0x1ee2,0xf4,0xf4,0x0,0xf4,0xd4,0xd4,0x0,0xd4,0x1ed1,0x1ed1,0x0,0x1ed1,0x1ed0,0x1ed0,0x0,0x1ed0,0x1ed3,0x1ed3,0x0,0x1ed3,0x1ed2,0x1ed2,0x0,0x1ed2,0x1ed5,0x1ed5,0x0,0x1ed5,0x1ed4,0x1ed4,0x0,0x1ed4,0x1ed7,
        0x1ed7,0x0,0x1ed7,0x1ed6,0x1ed6,0x0,0x1ed6,0x1ed9,0x1ed9,0x0,0x1ed9,0x1ed8,0x1ed8,0x0,0x1ed8,0xfa,0xfa,0x0,0xfa,0xda,0xda,0x0,0xda,0xf9,0xf9,0x0,0xf9,0xd9,0xd9,0x0,0xd9,0x1ee7,0x1ee7,0x0,0x1ee7,0x1ee6,0x1ee6,0x0,0x1ee6,
        0x169,0x169,0x0,0x169,0x168,0x168,0x0,0x168,0x1ee5,0x1ee5,0x0,0x1ee5,0x1ee4,0x1ee4,0x0,0x1ee4,0x1b0,0x1b0,0x0,0x1b0,0x1af,0x1af,0x0,0x1af,0x1ee9,0x1ee9,0x0,0x1ee9,0x1ee8,0x1ee8,0x0,0x1ee8,0x1eeb,0x1eeb,0x0,0x1eeb,0x1eea,
        0x1eea,0x0,0x1eea,0x1eed,0x1eed,0x0,0x1eed,0x1eec,0x1eec,0x0,0x1eec,0x1eef,0x1eef,0x0,0x1eef,0x1eee,0x1eee,0x0,0x1eee,0x1ef1,0x1ef1,0x0,0x1ef1,0x1ef0,0x1ef0,0x0,0x1ef0,0xfd,0xfd,0x0,0xfd,0xdd,0xdd,0x0,0xdd,0x1ef3,0x1ef3,
        0x0,0x1ef3,0x1ef2,0x1ef2,0x0,0x1ef2,0x1ef7,0x1ef7,0x0,0x1ef7,0x1ef6,0x1ef6,0x0,0x1ef6,0x1ef9,0x1ef9,0x0,0x1ef9,0x1ef8,0x1ef8,0x0,0x1ef8,0x1ef5,0x1ef5,0x0,0x1ef5,0x1ef4,0x1ef4,0x0,0x1ef4,0x111,0x111,0x0,0x111,0x110,0x110,0x0,0x110,
        0x128,0x128,0x0,0x128,0x129,0x129,0x0,0x129,
	);
	return mb_decode_numericentity($str, $convmap, "UTF-8");
}
function unicode_encode( $string )
{
	$strings = strtr( $string, array (
  '&#192;' => 'À',
  '&#193;' => 'Á',
  '&#194;' => 'Â',
  '&#200;' => 'È',
  '&#201;' => 'É',
  '&#202;' => 'Ê',
  '&#204;' => 'Ì',
  '&#205;' => 'Í',
  '&#208;' => 'Ð',
  '&#210;' => 'Ò',
  '&#211;' => 'Ó',
  '&#212;' => 'Ô',
  '&#213;' => 'Õ',
  '&#217;' => 'Ù',
  '&#218;' => 'Ú',
  '&#221;' => 'Ý',
  '&#224;' => 'à',
  '&#225;' => 'á',
  '&#226;' => 'â',
  '&#227;' => 'ã',
  '&#232;' => 'è',
  '&#233;' => 'é',
  '&#234;' => 'ê',
  '&#236;' => 'ì',
  '&#237;' => 'í',
  '&#242;' => 'ò',
  '&#243;' => 'ó',
  '&#244;' => 'ô',
  '&#249;' => 'ù',
  '&#250;' => 'ú',
  '&#253;' => 'ý',
  '&Agrave;' => 'À',
  '&Aacute;' => 'Á',
  '&Acirc;' => 'Â',
  '&Egrave;' => 'È',
  '&Eacute;' => 'É',
  '&Ecirc;' => 'Ê',
  '&Igrave;' => 'Ì',
  '&Iacute;' => 'Í',
  '&ETH;' => 'Ð',
  '&Ograve;' => 'Ò',
  '&Oacute;' => 'Ó',
  '&Ocirc;' => 'Ô',
  '&Otilde;' => 'Õ',
  '&Ugrave;' => 'Ù',
  '&Uacute;' => 'Ú',
  '&Yacute;' => 'Ý',
  '&agrave;' => 'à',
  '&aacute;' => 'á',
  '&acirc;' => 'â',
  '&#7927;' => 'ỷ',
  '&eacute;' => 'é',
  '&ecirc;' => 'ê',
  '&igrave;' => 'ì',
  '&iacute;' => 'í',
  '&ograve;' => 'ò',
  '&oacute;' => 'ó',
  '&ocirc;' => 'ô',
  '&ugrave;' => 'ù',
  '&uacute;' => 'ú',
  '&yacute;' => 'ý',
  '&#195;' => 'Ã',
  '\'' => '\'',
  '&amp;' => '&',
  '&#160;' => 'ể',
  '&#7893;' => 'ổ',
  '&#7875;' => 'ể',
  '&#7901;' => 'ờ',
  '&#7897;' => 'ộ',
  '&#7843;' => 'ả',
  '&quot;' => '"',
  '&#7871;' => 'ế',
  '&#7879;' => 'ệ',
  '&#7915;' => 'ừ',
  '&#7911;' => 'ủ',
  '&#7921;' => 'ự',
  '&#7845;' => 'ấ',
  '&#273;' => 'đ',
  '&#7841;' => 'ạ',
  '&#259;' => 'ă',
  '&#7849;' => 'ẩ',
  '&#7899;' => 'ớ',
  '&rdquo;' => '"',
  '&ldquo;' => '"',
  '&#7853;' => 'ậ',
  '&#7877;' => 'ễ',
  '&#7847;' => 'ầ',
  '&#7861;' => 'ẵ',
  '&#7907;' => 'ợ',
  '&#7919;' => 'ữ',
  '&#7909;' => 'ụ',
  '&#7889;' => 'ố',
  '&#7873;' => 'ề',
  '&#7857;' => 'ắ',
  '&#417;' => 'ơ',
  '&#7859;' => 'ẳ',
  '&#7863;' => 'ặ',
  '&#7865;' => 'ẹ',
  '&#7881;' => 'ỉ',
  '&#7895;' => 'ỗ',
  '&#7917;' => 'ử',
  '&#272;' => 'Đ',
  '&#7913;' => 'ứ',
  '&#7903;' => 'ở',
  '&#7867;' => 'ẻ',
  '&#7883;' => 'ị',
  '&#7885;' => 'ọ',
  '&#7855;' => 'ắ',
  '&#7869;' => 'ẽ',
  '&#432;' => 'ư',
  '&#7891;' => 'ồ',
  '&#361;' => 'ũ',
  '&#7887;' => 'ỏ',
  '&#7929;' => 'ỹ',
  '&#297;' => 'ĩ',
  '&#431;' => 'Ư',
  '&gt;' => '>',
  '&lt;' => '<',
  '&mdash;' => '—',
  '&hellip;' => '…',
  '&egrave;' => 'è',
  '&#7842;' => 'Ả',
  '&#7851;' => 'ẫ',
  '&#7905;' => 'ỡ',
  '&#7844;' => 'Ấ',
  '&nbsp;' => ' ',
  '&#7923;' => 'ỳ',
  '&#7870;' => 'Ế',
  '&#7840;' => 'Ạ',
  '&atilde;' => 'ã',
  '&Atilde;' => 'Ã',
  '&Aring;' => 'Â',
  '&copy;' => '©',
  '&#169;' => '©',
  '&reg;' => '®',
  '&#174;' => '®',
  '&#40;' => '(',
  '&#41;' => ')',
  '&#42;' => '*',
  '&#43;' => '+',
  '&#44;' => ',',
  '&#45;' => '-',
  '&#46;' => '.',
  '&#47;' => '/',
  '&#32;' => ' ',
  '&#33;' => '!',
  '&#34;' => '"',
  '&#35;' => '#',
  '&#36;' => '$',
  '&#37;' => '%',
  '&#38;' => '&',
  '&#39;' => '\'',
  '&#171' => '«',
  '&laquo;' => '«',
  '&#187;' => '»',
  '&raquo;' => '»',
  '&#8220;' => '"',
  '&#8221;' => '"',
  '&#8230;' => '…',
  '&#124;' => '|',
  '&#131;' => 'ƒ',
  '&#136;' => 'ˆ',
  '&#139;' => '‹',
  '&#8216;' => '"',
  '&#8217;' => '"',
  '&ndash;' => '-',
  '&prime;' => '\'',
) );
	return $strings;
}
function unicode_decode($string){
	return strtr($string,array('À' => '&#192;','Á' => '&#193;','Â' => '&#194;','È' => '&#200;','É' => '&#201;','Ê' => '&#202;',
	'Ì' => '&#204;','Í' => '&#205;','Ð' => '&#208;','Ò' => '&#210;','Ó' => '&#211;','Ô' => '&#212;','Õ' => '&#213;',
	'Ù' => '&#217;','Ú' => '&#218;','Ý' => '&#221;','à' => '&#224;','á' => '&#225;','â' => '&#226;','ã' => '&#227;',
	'è' => '&#232;','é' => '&#233;','ê' => '&#234;','ì' => '&#236;','í' => '&#237;','ò' => '&#242;','ó' => '&#243;',
	'ô' => '&#244;','ù' => '&#249;','ú' => '&#250;','ý' => '&#253;','Ã' => '&#195;',"'" => "'",' ' => '&amp;',' ' => '&#160;',
	'ổ' => '&#7893;','ể' => '&#7875;','ờ' => '&#7901;','ộ' => '&#7897;','ả' => '&#7843;','ể' => '&#160;','"' => '&quot;',
	'ế' => '&#7871;','ệ' => '&#7879;','ừ' => '&#7915;','ủ' => '&#7911;','ự' => '&#7921;','ấ' => '&#7845;','đ' => '&#273;',
	'ạ' => '&#7841;','ă' => '&#259;','ẩ' => '&#7849;','ớ' => '&#7899;','"' => '&rdquo;','"' => '&ldquo;','ậ' => '&#7853;',
	'ễ' => '&#7877;','ầ' => '&#7847;','ẵ' => '&#7861;','ợ' => '&#7907;','ữ' => '&#7919;','ụ' => '&#7909;','ố' => '&#7889;',
	'ề' => '&#7873;','ắ' => '&#7857;','ơ' => '&#417;','ẳ' => '&#7859;','ặ' => '&#7863;','ẹ' => '&#7865;','ỉ' => '&#7881;',
	'ỗ' => '&#7895;','ử' => '&#7917;','Đ' => '&#272;','ứ' => '&#7913;','ở' => '&#7903;','ẻ' => '&#7867;','ị' => '&#7883;',
	'ọ' => '&#7885;','ắ' => '&#7855;','ẽ' => '&#7869;','ư' => '&#432;','ồ' => '&#7891;','ũ' => '&#361;','ỏ' => '&#7887;',
	'ỹ' => '&#7929;','ĩ' => '&#297;','Ư' => '&#431;','>' => '&gt;','<' => '&lt;','&' => '&amp;','—' => '&mdash;','…' => '&hellip;',
	'è' => '&egrave;','Ả' => '&#7842;','ẫ' => '&#7851;','ỡ' => '&#7905;','Ấ' => '&#7844;',' ' => '&nbsp;','ỳ' => '&#7923;',
	'Ế' => '&#7870;','Ạ' => '&#7840;','ã' => '&atilde;','Ã' => '&Atilde;','Â' => '&Aring;','©' => '&copy;','©' => '&#169;',
	'®' => '&reg;','®' => '&#174;','(' => '&#40;',')' => '&#41;','*' => '&#42;','+' => '&#43;',',' => '&#44;','-' => '&#45;',
	'.' => '&#46;','/' => '&#47;',' ' => '&#32;','!' => '&#33;','"' => '&#34;','#' => '&#35;','$' => '&#36;','%' => '&#37;',
	'&' => '&#38;',"'" => '&#39;','«' => '&#171','«' => '&laquo;','»' => '&#187;','»' => '&raquo;','"' => '&#8220;','"' => '&#8221;',
	'…' => '&#8230;','|' => '&#124;','ƒ' => '&#131;','ˆ' => '&#136;','‹' => '&#139;','"' => '&#8216;','"' => '&#8217;','-' => '&ndash;'));
}

?>